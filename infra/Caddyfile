{
  auto_https off      # Dev only: In prod, Caddy gets certs automatically.
}

:8080 {
  # quick health page at root
  respond / "yourcomics caddy up" 200

  # Caddy runs in a container; talk to the hostâ€™s Node server:
  handle_path /api* {
    reverse_proxy host.docker.internal:3000
  }

  # proxy MinIO API through Caddy so everything is under one front door
  # Talk directly to the MinIO service on the compose network:
  @minio path /minio* /api/minio* /s3*
  handle @minio {
    reverse_proxy minio:${MINIO_API_PORT}  
  }

  log {
    output stdout    # write logs to container stdout (visible via `docker logs`)
    format console   # human-friendly formatting
  }
}

